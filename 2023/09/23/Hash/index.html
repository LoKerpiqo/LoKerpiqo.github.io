<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.18.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Hash maps and Setshash maps and sets are implemented using hasing.  Hash function is a function that takes an input (anything immutable) and deterministically converts it to an interger that is less t">
<meta property="og:type" content="article">
<meta property="og:title" content="Hash">
<meta property="og:url" content="http://example.com/2023/09/23/Hash/index.html">
<meta property="og:site_name" content="Xinheng Wu&#39;s blog">
<meta property="og:description" content="Hash maps and Setshash maps and sets are implemented using hasing.  Hash function is a function that takes an input (anything immutable) and deterministically converts it to an interger that is less t">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-09-23T01:28:25.000Z">
<meta property="article:modified_time" content="2023-09-23T01:28:25.466Z">
<meta property="article:author" content="Xinheng Wu">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2023/09/23/Hash/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2023/09/23/Hash/","path":"2023/09/23/Hash/","title":"Hash"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hash | Xinheng Wu's blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Xinheng Wu's blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Hash-maps-and-Sets"><span class="nav-number">1.</span> <span class="nav-text">Hash maps and Sets</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Hash-function-Array-Hash-map-dictionary"><span class="nav-number">1.0.1.</span> <span class="nav-text">Hash function + Array &#x3D; Hash map&#x2F; dictionary</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Some-disadvantages"><span class="nav-number">1.0.2.</span> <span class="nav-text">Some disadvantages</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Sets-for-check-existence"><span class="nav-number">1.1.</span> <span class="nav-text">Sets for check existence</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#When-we-want-to-use-Arrays-as-keys"><span class="nav-number">1.1.1.</span> <span class="nav-text">When we want to use Arrays as keys?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Counting"><span class="nav-number">1.2.</span> <span class="nav-text">Counting</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Count-the-number-of-subarrays-with-an-%E2%80%9Cexact%E2%80%9D-conostraint"><span class="nav-number">1.2.1.</span> <span class="nav-text">Count the number of subarrays with an “exact” conostraint</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hash-Table-Exersice"><span class="nav-number">1.3.</span> <span class="nav-text">Hash Table Exersice</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Xinheng Wu</p>
  <div class="site-description" itemprop="description">This is my personal blog.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/09/23/Hash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xinheng Wu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Xinheng Wu's blog">
      <meta itemprop="description" content="This is my personal blog.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Hash | Xinheng Wu's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hash
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-09-23 11:28:25" itemprop="dateCreated datePublished" datetime="2023-09-23T11:28:25+10:00">2023-09-23</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="Hash-maps-and-Sets"><a href="#Hash-maps-and-Sets" class="headerlink" title="Hash maps and Sets"></a>Hash maps and Sets</h1><p>hash maps and sets are implemented using <code>hasing</code>. </p>
<p><strong>Hash function</strong> is a function that takes an input (anything <strong>immutable</strong>) and deterministically converts it to an <strong>interger</strong> that is <strong>less than a fixed size</strong> predefined by the programmer. </p>
<h3 id="Hash-function-Array-Hash-map-dictionary"><a href="#Hash-function-Array-Hash-map-dictionary" class="headerlink" title="Hash function + Array &#x3D; Hash map&#x2F; dictionary"></a>Hash function + Array &#x3D; Hash map&#x2F; dictionary</h3><p>Recall that Array has O(1) random access. The main constraint with array is that they are a fixed size, and the indices have to be intergers. </p>
<p>When we use hash function to convers anything into an integer, we can remove array’s contraints of indices needing to be integers! </p>
<p><strong>Arrays</strong>, map integer <code>indices</code> to <code>values</code>. While, <strong>hash maps</strong> map <code>keys</code> to <code>values</code>. Hash maps’ key has to be immutable. Values can be anything. </p>
<p>Every major language has a built-in implementation of a hash map. For example, in Python they’re called <code>dictionaries</code> and declaring one is as simple as <code>dic = &#123;&#125;</code>.</p>
<p><strong>A hash map is an <code>unordered</code> data structure that stores key-value pairs.</strong> It can add&#x2F;remove elements in O(1), as well as update values of a key and check if a key exists in O(1). You can iterate over both key and values, but the iteration won’t necessarily follow any order. </p>
<blockquote>
<p>An <code>ordered</code> data structure is when insertion order is remembered. An <code>unordered</code> data structure is when the insertion order is not relevant. Hash function has preimage resistance so the insetion order cannot be known.  </p>
</blockquote>
<h3 id="Some-disadvantages"><a href="#Some-disadvantages" class="headerlink" title="Some disadvantages"></a>Some disadvantages</h3><ul>
<li>Collisions, solved by chaining (Linked List). </li>
<li>Use Prime number&#x2F; modules. </li>
<li>Hash maps can take up more spaces as a pre-defined fixed size was set. </li>
<li>Resizing hash maps is expensive as every key needs to be re-hashed.</li>
</ul>
<h2 id="Sets-for-check-existence"><a href="#Sets-for-check-existence" class="headerlink" title="Sets for check existence"></a>Sets for check existence</h2><p>Set uses the same mechanism for hasing keys into integers. Set just store this keys as their value and do not map to anything. So it is convenient to <strong>check existence</strong>.  </p>
<p>Sets <strong>do NOT track frequency</strong>, as same elements will be hashed into the same integer. </p>
<h3 id="When-we-want-to-use-Arrays-as-keys"><a href="#When-we-want-to-use-Arrays-as-keys" class="headerlink" title="When we want to use Arrays as keys?"></a>When we want to use Arrays as keys?</h3><p>Arrays are <code>mutable</code>, so how do we store an ordered array of elements as a key? </p>
<p>We need to convert an array into an unique immutable key. In Python, tuples are immutable, so it’s as easy as doing <code>tuple(arr)</code>. OR convert it to strings, for example, using comma to separate elements, <code>[1, 51, 163] --&gt; &quot;1,51,163&quot;</code>.</p>
<blockquote>
<p><strong>Two Sum (unordered)</strong><br>we have one point <code>i</code> to interate along the <code>nums</code>. Use a hash map <code>seen</code> to record element that been seen, <code>element: index</code>. At index <code>i</code>, calculate <code>rest = target - nums[i]</code>, if <code>rest</code> has been previously stored in <code>seen</code>, meaning that we now found two integers of <code>nums[i] + rest == target</code>. return <code>[seen[rest], i]</code>.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">twoSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">    seen = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">        rest = target - nums[i]</span><br><span class="line">        <span class="keyword">if</span> rest <span class="keyword">in</span> seen:</span><br><span class="line">            <span class="keyword">return</span> [i, seen[rest]]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            seen[nums[i]] = i</span><br><span class="line">    <span class="keyword">return</span> [-<span class="number">1</span>,-<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p>Time complexity: O(n). Space Complexity: O(n).</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">seen = <span class="built_in">set</span>()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)):</span><br><span class="line">    <span class="keyword">if</span> s[i] <span class="keyword">not</span> <span class="keyword">in</span> seen:</span><br><span class="line">        seen.add(s[i])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> s[i]</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot; &quot;</span></span><br></pre></td></tr></table></figure>

<p>Anytime you find your algorithm running if … in …, then consider using a hash map or set to store elements to have these operations run in O(1).</p>
<h2 id="Counting"><a href="#Counting" class="headerlink" title="Counting"></a>Counting</h2><p>Counting is very common for hash maps. Anytime you need to track frequency of something, think about using a hash map to do it!</p>
<blockquote>
<p><strong>Example 1:</strong> You are given a string <code>s</code> and an integer <code>k</code>. Find the length of the longest substring that contains <strong>at most</strong> <code>k</code> distinct characters. <br><br>For example, given <code>s=&quot;eceba</code> and <code>k=2</code>, return <code>3</code>. The longest substring with at most <code>2</code> distinct characters is <code>ece</code>.</p>
</blockquote>
<p>This problem can be solved by Slide Window.  </p>
<ul>
<li>Extend the window size untill it become INVALID, meaning there are more than <code>k</code> distince characters in the window. </li>
<li>Use a hash map <code>counts</code> to keep frequencies of distinct characters in current window. </li>
<li>The number of distince characters can be calculated by <code>length (number of keys)</code> of counts. </li>
<li>While <code>length of counts &gt; k</code>, increment left, and reduce&#x2F;remove elements from <code>counts</code>.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">find_longest_substring</span>(<span class="params">s, k</span>):</span><br><span class="line">    counts = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">    left = <span class="number">0</span></span><br><span class="line">    ans = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> right <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)):</span><br><span class="line">        counts[s[right]] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> <span class="built_in">len</span>(counts) &gt; k:</span><br><span class="line">            counts[s[left]] -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> counts[s[left]] == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">del</span> counts[s[left]]</span><br><span class="line">            left += <span class="number">1</span></span><br><span class="line">        ans = <span class="built_in">max</span>(ans, right-left+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> ans </span><br></pre></td></tr></table></figure>
<p>Time Complexity: O(n). Space O(k). as the it will delete elements from counts once its length exceeds k. </p>
<blockquote>
<p><strong>2248. Intersection of Multiple Arrays</strong> Given a 2D array <code>nums</code> that contains <code>n</code> arrays of distinct integers, return a sorted array containing all the numbers that appear in all <code>n</code> arrays. </p>
</blockquote>
<p>Key to aware that numbers that appear in all <code>n</code> arrays have frequencies of <code>len(nums)</code>. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">intersection</span>(<span class="params">nums</span>):</span><br><span class="line">    counts = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">    <span class="keyword">for</span> arr <span class="keyword">in</span> nums:</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> arr:</span><br><span class="line">            counts[x] += <span class="number">1</span></span><br><span class="line">    n = <span class="built_in">len</span>(nums)</span><br><span class="line">    ans = []</span><br><span class="line">    <span class="keyword">for</span> key,value <span class="keyword">in</span> counts.items():</span><br><span class="line">        <span class="keyword">if</span> value == n:</span><br><span class="line">            ans.append(key)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sorted</span>(ans)</span><br></pre></td></tr></table></figure>
<p>Let <code>m</code> be the average length of <code>arr</code>.<br>Time complexity: O(n<em>m + mlogm) at worst case. Space complexity: O(m). If every element in <code>nums</code> are unique, then Space complexity is O(n</em>m).</p>
<blockquote>
<p><strong>Check Occurence Equal</strong>. Given a string s, determine if all characters have the same frequency.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">areOccurenceEqual</span>(<span class="params">s</span>):</span><br><span class="line">    counts = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">    <span class="keyword">for</span> ch <span class="keyword">in</span> s:</span><br><span class="line">        counts[ch]+=<span class="number">1</span></span><br><span class="line">    freq = counts.values() <span class="comment"># returns an array of frequencies!</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Counter(s).values()</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(<span class="built_in">set</span>(freq))==<span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="Count-the-number-of-subarrays-with-an-“exact”-conostraint"><a href="#Count-the-number-of-subarrays-with-an-“exact”-conostraint" class="headerlink" title="Count the number of subarrays with an “exact” conostraint"></a>Count the number of subarrays with an “exact” conostraint</h3><blockquote>
<p><strong>Example: 560. Subarray Sum Equals k</strong> Given an integer array <code>nums</code> and an integer <code>k</code>, find the number of subarrays whose sum is equal to <code>k</code>.</p>
</blockquote>
<p>Key to understand that the difference between any two prefix sums, e.g., end at <code>i</code> and <code>j</code>, represents the sum of the subarray between <code>(i, j]</code>. </p>
<p>So, to find the subarrays whose sum is equal to <code>k</code>, we need to find the difference (of two prefix sums) to be <code>k</code>.</p>
<ul>
<li>Iterate over <code>nums</code>, calculate prefix sum by updating <code>curr</code> ending at curret index <code>i</code>.</li>
<li>if <code>curr - k</code> was a previous prefix sum, means we found two prefix sum whose difference is <code>k</code>. Update <code>ans+=1</code></li>
<li>Since there are non-posotive numbers, so same prefix sum can occur multiple times. meaning that multiple prefix sum can equal to <code>curr-k</code>. </li>
<li>So we use hash map <code>count</code> to track prefix sum frequencies. Instead, we update <code>ans += count[curr-k]</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">subarraySum</span>(<span class="params">nums, k</span>):</span><br><span class="line">    counts = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">    counts[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    ans, curr = <span class="number">0</span>, <span class="number">0</span> </span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">        curr += num</span><br><span class="line">        ans += counts[curr-k]</span><br><span class="line">        counts[curr] += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>1248. Count Number of Nice Subarrays.</strong> Given an array of positive integers nums and an integer k. Find the number of subarrays with exactly k odd numbers in them.</p>
</blockquote>
<p>Similar to previous question, but instead of using <code>curr</code> to calculate prefix sum,<br>here we use <code>curr</code> to record the number of odd elements till index <code>i</code>. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">NumberofNiceSubarray</span>(<span class="params">nums, k</span>):</span><br><span class="line">    counts = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">    counts[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    ans, curr = <span class="number">0</span>, <span class="number">0</span> </span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">        <span class="keyword">if</span> num %<span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">            curr += <span class="number">1</span></span><br><span class="line">        ans += counts[curr-k]</span><br><span class="line">        counts[curr] += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>


<h2 id="Hash-Table-Exersice"><a href="#Hash-Table-Exersice" class="headerlink" title="Hash Table Exersice"></a>Hash Table Exersice</h2><blockquote>
<p><strong>383. Ransom Note.</strong> Given two strings ransomNote and magazine, return true if ransomNote can be constructed by using the letters from magazine and false otherwise.<br><br> Each letter in magazine can only be used once in ransomNote.</p>
</blockquote>
<p>Meaning that frequency of ransomNote must be smaller or equal to frequency of magazine. and <code>m &lt; n</code>.</p>
<p>We can build a <code>count_mag</code> recording the frequency of magazine. And then iterate along ransomNote, if meeting a <code>ch</code> thats in <code>count_mag</code>, then reduce the frequency, till it become <code>0</code>.</p>
<p>If current <code>ch</code> in ransomNote is not in <code>count_mag</code> (i.e., <code>count_mag[ch] &lt;=0</code>) then return False. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">canConstruct</span>(<span class="params">ransomNote, magazine</span>):</span><br><span class="line">    m, n = <span class="built_in">len</span>(ransomNote), <span class="built_in">len</span>(magazine)</span><br><span class="line">    <span class="keyword">if</span> m &gt; n:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        count_mag = Counter(magazine)</span><br><span class="line">        <span class="keyword">for</span> ch <span class="keyword">in</span> ransomNote:</span><br><span class="line">            <span class="keyword">if</span> count_mag[ch] &lt;= <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                count_mag[ch] -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>205. Isomorphic String</strong> Given two strings <code>s</code> and <code>t</code>, determine if they are isomorphic (when characters in <code>s</code> can be replaced to get <code>t</code>).<br><br>All occurrences of a character must be replaced with another character while preserving the order of characters.<br> No two characters may map to the same character, but a character may map to itself.</p>
</blockquote>
<ul>
<li>use a hash map <code>mapp</code>, map element of <code>s</code> to element of <code>t</code>. <code>map[c1] = c2</code></li>
<li>iterate along <code>zip(s,t)</code>, if <code>c1 in mapp</code>, check if <code>mapp[c1]==c2</code>.</li>
<li>else, check if c2 in mapp.values(). meaning that No 2 characters can map to the same character.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">isIsomorphic</span>(<span class="params">s, t</span>):</span><br><span class="line">    mapp = <span class="built_in">dict</span>()</span><br><span class="line">    <span class="keyword">for</span> c1, c2 <span class="keyword">in</span> <span class="built_in">zip</span>(s,t):</span><br><span class="line">        <span class="keyword">if</span> c1 <span class="keyword">in</span> mapp:</span><br><span class="line">            <span class="keyword">if</span> mapp[c1] != c2:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> c2 <span class="keyword">in</span> mapp.values():</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        mapp[c1] = c2 </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>290. Word Pattern</strong> Given a <code>pattern</code> and a string <code>s</code>, find if <code>s</code> follows the same pattern.<br>Here follow means a <code>full match</code>, such that there is a <code>bijection</code> between a letter in <code>pattern</code> and a non-empty word in <code>s</code>.</p>
</blockquote>
<p>Similar to last problem. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">wordPattern</span>(<span class="params">pattern, s</span>):</span><br><span class="line">    dicts = <span class="built_in">dict</span>()</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(pattern) != <span class="built_in">len</span>(s.split()):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> ch, word <span class="keyword">in</span> <span class="built_in">zip</span>(pattern, s.split()):</span><br><span class="line">        <span class="keyword">if</span> ch <span class="keyword">in</span> dicts:</span><br><span class="line">            <span class="keyword">if</span> dicts[ch] != word:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> word <span class="keyword">in</span> dicts.values():</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        dicts[ch] = word</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span> </span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>242. Valid Anagram</strong> Given two strings <code>s</code> and <code>t</code>, return <code>true</code> if <code>t</code> is an anagram of <code>s</code>, and <code>false</code> otherwise. <br><br>An Anagram is a word or phrase formed by rearranging the letters of a different word or phrase, typically using all the original letters exactly once.</p>
</blockquote>
<p>Similar to 383. Ransom Note.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">isAnagram</span>(<span class="params">s, t</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(s) != <span class="built_in">len</span>(t):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    counts = Counter(s)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(s) != <span class="built_in">len</span>(t):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">for</span> ch <span class="keyword">in</span> t:</span><br><span class="line">        <span class="keyword">if</span> counts[ch] &lt;= <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            counts[ch] -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span> </span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>49. Group Anagrams</strong> Given an array of strings strs, group the anagrams together. You can return the answer in any order.</p>
</blockquote>
<blockquote>
<p>Example 1:<br>Input: strs &#x3D; [“eat”,”tea”,”tan”,”ate”,”nat”,”bat”]<br><br>Output: [[“bat”],[“nat”,”tan”],[“ate”,”eat”,”tea”]]</p>
</blockquote>
<p><strong>Method 1</strong>. We can use sorted array as the key, as anagrams have the same sorted array. </p>
<ul>
<li>use a hash map of list. <code>defaultdict(list)</code>.</li>
<li>Iterate <code>ch</code> along <code>strs</code>, <code>sorted(ch)</code> as key, values are <code>ch</code>. </li>
<li>then, <code>counts.values</code> should be the ans.<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">groupAnagrams</span>(<span class="params">strs</span>):</span><br><span class="line">    counts = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">    <span class="keyword">for</span> ch <span class="keyword">in</span> strs:</span><br><span class="line">        counts[<span class="string">&quot;&quot;</span>.join(<span class="built_in">sorted</span>(ch))].append(ch)</span><br><span class="line">    <span class="keyword">return</span> counts.values()</span><br></pre></td></tr></table></figure>
Time complexity: <code>O(n*mlogm)</code>, where n is the length of strs. m is the average length of str[i]. Space complexity: <code>O(m*n)</code>.</li>
</ul>
<p><strong>Method 2</strong>. we can use an <code>one-hot</code> array of length 26 to count the frequency of <code>str[i]</code>. For example, both <code>&quot;abc&quot;</code>,<code>&quot;cba&quot;</code> can be represented as <code>[1,1,1,0,0,0,0,0,....,0]</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">groupAnagrams</span>(<span class="params">strs</span>):</span><br><span class="line">    counts = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">    <span class="keyword">for</span> ch <span class="keyword">in</span> strs:</span><br><span class="line">        key = [<span class="number">0</span>]*<span class="number">26</span></span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> ch:</span><br><span class="line">            key[<span class="built_in">ord</span>(c) - <span class="built_in">ord</span>(<span class="string">&#x27;a&#x27;</span>)] += <span class="number">1</span></span><br><span class="line">        counts[<span class="built_in">tuple</span>(key)].append(ch)</span><br><span class="line">    <span class="keyword">return</span> counts.values()</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>Two Sum (unsorted)</strong>.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">twoSum</span>(<span class="params">nums, target</span>):</span><br><span class="line">    dicts = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">        rest = target - nums[i]</span><br><span class="line">        <span class="keyword">if</span> rest <span class="keyword">in</span> dicts:</span><br><span class="line">            <span class="keyword">return</span> [dicts[rest], i]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            dicts[nums[i]] = i</span><br><span class="line">    <span class="keyword">return</span> [-<span class="number">1</span>, -<span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>220. Happy Number</strong> Write an algorithm to determine if a number n is happy. A happy number is a number defined by the following process:</p>
</blockquote>
<ul>
<li>Starting with any positive integer, replace the number by the sum of the squares of its digits.</li>
<li>Repeat the process until the number equals 1 (where it will stay), or it loops endlessly in a cycle which does not include 1.</li>
<li>Those numbers for which this process ends in 1 are happy.<br>Return true if n is a happy number, and false if not.</li>
</ul>
<p><strong>Solution:</strong> By doing above operation, we will end in two ways:</p>
<ol>
<li>It eventually gets to 1.</li>
<li>It eventually gets stuck in a cycle (being seen in hash set).</li>
</ol>
<ul>
<li>Note that it cannot going to infinity, as <code>999</code> next number will be 243.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">isHappy</span>(<span class="params">n</span>):</span><br><span class="line">    seen = <span class="built_in">set</span>()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_next</span>(<span class="params">n</span>):</span><br><span class="line">        total_sum =<span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">            n, digit = <span class="built_in">divmod</span>(n, <span class="number">10</span>)</span><br><span class="line">            <span class="comment"># to take off every digit from the least significant one </span></span><br><span class="line">            total_sum += digit ** <span class="number">2</span></span><br><span class="line">        <span class="keyword">return</span> total_sum</span><br><span class="line">    <span class="keyword">while</span> n != <span class="number">1</span> <span class="keyword">and</span> n <span class="keyword">not</span> <span class="keyword">in</span> seen:</span><br><span class="line">        seen.add(n)</span><br><span class="line">        n = get_next(n)</span><br><span class="line">    <span class="comment"># end while when n== 1 or n in seen.</span></span><br><span class="line">    <span class="keyword">return</span> n == <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>Time complexity: O(logn). Space O(logn)</p>
<blockquote>
<p><strong>Contains Duplicate II</strong>. Given an integer array <code>nums</code> and an integer <code>k</code>, return <code>true</code> if there are two distinct indices <code>i</code> and <code>j</code> in the array such that <code>nums[i] == nums[j]</code> and <code>abs(i - j) &lt;= k</code>.</p>
</blockquote>
<p>Use a hash map <code>counts</code> to record element, with its <code>index + k</code>, so for any new element at index <code>j</code>, if it is in <code>counts</code>, chech if <code>j &lt; counts[nums[j]]</code>. if not, then update <code>counts[nums[j]]</code> with the new index <code>j + k</code>. This is because further element will not achieve <code>abs(i-j) &lt;=k</code> to <code>j</code> rather than to an earlier index. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">containsNearbyDuplicate</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">    counts = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">        <span class="keyword">if</span> nums[i] <span class="keyword">not</span> <span class="keyword">in</span> counts <span class="keyword">or</span> i &gt; counts[nums[i]]:</span><br><span class="line">            counts[nums[i]] = i+k</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>128. Longest Consecutive Sequence</strong> Given an unsorted array of integers <code>nums</code>, return the <code>length</code> of the longest consecutive elements sequence. You must write an algorithm that runs in O(n) time.</p>
</blockquote>
<blockquote>
<p>Example 2:<br>Input: nums &#x3D; [0,3,7,2,5,8,4,6,0,1]<br><br>Output: 9</p>
</blockquote>
<p>The difficulty of this problem lies on that we dont know where is the starting element of the longest sequence - it can be anywhere. So we may iterate through the <code>nums</code> to build sequence and update with the longest one. </p>
<p>Method 1. try brute force. Because the first element of longest sequence could be any position in nums. We can just iterate <code>num</code> along nums, build sequence for each <code>num</code>, update with the longest sequence.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">longestConsecutive</span>(<span class="params">nums</span>):</span><br><span class="line">    longest_sequence = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">        curr = num</span><br><span class="line">        curr_sequence = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> curr + <span class="number">1</span> <span class="keyword">in</span> nums:</span><br><span class="line">            curr_sequence += <span class="number">1</span></span><br><span class="line">            curr += <span class="number">1</span></span><br><span class="line">        longest_sequence = <span class="built_in">max</span>(longest_sequence, curr_sequence)</span><br><span class="line">    <span class="keyword">return</span> longest_sequence</span><br></pre></td></tr></table></figure>
<p><strong>Time complexity : O($n^3$).</strong> The outer loop runs exactly nnn times, and because <code>curr</code> increments by <code>1</code> during each iteration of the while loop, it runs in<br>O(n) time. Then, on each iteration of the while loop, an <code>O(n) lookup in the array</code> is performed. Therefore, this brute force algorithm is really three nested O(n) loops, which compound multiplicatively to a<br><code>cubic</code> runtime.</p>
<p>**Method2 ** We can optimize above brute force to O(n). Consider below, </p>
<ul>
<li>We can improve the check existence to O(1) with Hashset. </li>
<li>Improve by only build sequences from numbers that was not in part of a longer sequence. </li>
<li>For example, if <code>(num-1) in num_set</code>. then we can always achieve a longer sequence with <code>num-1</code> rather than <code>num</code>.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">longestConsecutive</span>(<span class="params">nums</span>):</span><br><span class="line">    longest_sequence = <span class="number">0</span></span><br><span class="line">    num_set = <span class="built_in">set</span>(nums)</span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> num_set:</span><br><span class="line">        <span class="keyword">if</span> num-<span class="number">1</span> <span class="keyword">not</span> <span class="keyword">in</span> num_set:</span><br><span class="line">            curr = num</span><br><span class="line">            curr_sequence = <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> curr+<span class="number">1</span> <span class="keyword">in</span> num_set:</span><br><span class="line">                curr += <span class="number">1</span></span><br><span class="line">                curr_sequence += <span class="number">1</span></span><br><span class="line">            longest_sequence = <span class="built_in">max</span>(longest_sequence, curr_sequence)</span><br><span class="line">    <span class="keyword">return</span> longest_sequence</span><br></pre></td></tr></table></figure>
<p><strong>Time Complexity: O(n).</strong> Although it may look like a O($n^2$) at first. But actually the while loop only happens when <code>num-1 not in num_set</code>. <strong>The while loop can only run in total of <code>n</code> times through the whole runtime of the algorithm.</strong> So the nested loops only runs for O(n) + O(n) &#x3D; O(n) time. </p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/09/21/Array-exercise/" rel="prev" title="Array_exercise">
                  <i class="fa fa-angle-left"></i> Array_exercise
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Xinheng Wu</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
